<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El tiempo en Espi</title>
    <link rel="stylesheet" href="sainlogic.css">
    <link rel="icon" type="image/png" href="favicon2.png">
</head>

<body>
    <div class="tab">
        <div class="tab-buttons">
            <button class="tablink active" onclick="openTab('actual')">Datos Actuales</button>
            <button class="tablink" onclick="openTab('grafico')">Gr√°fico Hist√≥rico</button>
            <button class="tablink" onclick="openTab('prevision')">Previsi√≥n</button>
        </div>
        <div class="theme-toggle">
            <button id="darkModeToggle">‚òÄÔ∏è</button>
        </div>
    </div>


    <div id="actual" class="tabcontent">
        <div id="disclaimer" class="hidden">
            <p>No se han detectado cambios en los datos durante los √∫ltimos 10 minutos. Hay 2 posibles soluciones:</p>
            <p>1) Presiona el bot√≥n "EN":</p>
            <img src="EN.jpg" alt="Advertencia" />
            <p>2) Conectate al wifi ESP32_AP (contrase√±a: 12345678), y luego presionar configure wifi (TP_Link_AP_7C1E,
                contrase√±a:35019503)</p>
        </div>
        <div class="current-data-container">
            <div class="data-card">
                <div class="data-icon">üåßÔ∏è</div>
                <div class="data-info">
                    <h3>Lluvia</h3>
                    <p id="rainData">0 mm</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-icon">üå°Ô∏è</div>
                <div class="data-info">
                    <h3>Temperatura</h3>
                    <p id="tempData">0 ¬∞C</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-icon">üî•</div>
                <div class="data-info">
                    <h3>Sensaci√≥n T√©rmica</h3>
                    <p id="heatIndexData">No disponible</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-icon">üíß</div>
                <div class="data-info">
                    <h3>Humedad</h3>
                    <p id="humidityData">0%</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-icon">üå¨Ô∏è</div>
                <div class="data-info">
                    <h3>Viento Medio</h3>
                    <p id="windData">0 km/h</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-icon">üí®</div>
                <div class="data-info">
                    <h3>R√°faga</h3>
                    <p id="gustData">0 km/h</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-icon">üß≠</div>
                <div class="data-info">
                    <h3>Direcci√≥n del viento</h3>
                    <p id="directionData">0</p>
                </div>
            </div>
            <div class="data-card">
                <div class="data-info">
                    <div class="data-icon">üìà</div>
                    <h3>
                        Pulsa para ver el gr√°fico semanal de temperaturas:
                    </h3>
                    <p>
                        <a href="Grafico_semanal.html" class="Grafico-semanal-link">Gr√°fico Semanal</a>
                    </p>
                </div>
            </div>
        </div>
    </div>


    <div id="grafico" class="tabcontent" style="display:none;">
        <div id="dateFilter">
            <form id="dateRangeForm">
                <label for="startDate">Fecha y hora de inicio:</label>
                <input type="datetime-local" id="startDate" name="startDate" required>
                <label for="endDate">Fecha y hora de fin:</label>
                <input type="datetime-local" id="endDate" name="endDate" required>
                <button type="submit">Filtrar datos</button>
            </form>
        </div>
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner-modern"></div>
            <p class="loading-text">Cargando...</p>
        </div>
        <div class="raintotalcontainer">
            <div id="rainDataContainer" class="rain-data-container">
                <div class="rain-data-icon">üåßÔ∏è</div>
                <div class="rain-data-info">
                    <h3>Lluvia Acumulada</h3>
                    <p id="totalRainData">Selecciona las fechas</p>
                </div>
            </div>
        </div>
        <div id="chartContainerTemperatura" class="chart" style="height: 300px; width: 100%;"></div>
        <div id="chartContainerLluvia" class="chart" style="height: 300px; width: 100%;"></div>
        <div id="chartContainerVientoMedio" class="chart" style="height: 300px; width: 100%;"></div>
        <div id="chartContainerRafaga" class="chart" style="height: 300px; width: 100%;"></div>
        <div id="chartContainerHumedad" class="chart" style="height: 300px; width: 100%;"></div>
        <div id="chartContainerDireccionViento" style="height: 370px; width: 100%;"></div>
    </div>

    <div id="prevision" class="tabcontent">
        <button id="fetchForecastBtn">Cargar Previsi√≥n</button>
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Cargando...</p>
        </div>

        <h3>Condiciones Actuales</h3>
        <table id="tablaActual">
            <thead>
                <tr>
                    <th>Resumen</th>
                    <th>Temperatura (¬∞C)</th>
                    <th>Viento (km/h, direcci√≥n)</th>
                    <th>Precipitaci√≥n (mm)</th>
                    <th>Nubosidad (%)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h3>Previsi√≥n Horaria</h3>
        <table id="tablaHoraria">
            <thead>
                <tr>
                    <th>Hora</th>
                    <th>Resumen</th>
                    <th>Temperatura (¬∞C)</th>
                    <th>Viento (m/s, direcci√≥n)</th>
                    <th>Precipitaci√≥n (mm)</th>
                    <th>Nubosidad (%)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <h3>Previsi√≥n Diaria</h3>
        <table id="tablaDiaria">
            <thead>
                <tr>
                    <th>D√≠a</th>
                    <th>Resumen</th>
                    <th>Temp. M√≠n. (¬∞C)</th>
                    <th>Temp. M√°x. (¬∞C)</th>
                    <th>Viento (km/h, direcci√≥n)</th>
                    <th>Precipitaci√≥n (mm)</th>
                    <th>Nubosidad (%)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>



    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
    <script src="tabs.js"></script>
    <script src="charts.js"></script>
    <script src="data.js"></script>
    <script src="theme.js"></script>
    <script type="module" src="./main.js"></script>
</body>

</html>